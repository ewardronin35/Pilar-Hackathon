<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Course - Pilar-eLearn</title>
    <link rel="icon" href="../images/pilarLogo.ico" type="image/x-icon">
    <link rel="shortcut icon" href="../images/pilarLogo.ico" type="image/x-icon">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #7209b7;
            --secondary: #3a0ca3;
            --accent: #4cc9f0;
            --success: #4ade80;
            --warning: #f9c74f;
            --danger: #ef476f;
            --light: #f8f9fa;
            --dark: #212529;
            --bg: #0f172a;
            --card-bg: #1e293b;
            --text: #f8fafc;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.6;
            transition: all 0.3s ease;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background-color: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(10px);
            padding: 15px 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
            text-decoration: none;
        }

        .logo i {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-size: 2rem;
        }

        .user-stats {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .stat {
            display: flex;
            align-items: center;
            gap: 8px;
            background-color: rgba(0, 0, 0, 0.2);
            padding: 8px 12px;
            border-radius: 20px;
        }

        .stat i {
            color: var(--accent);
        }

        .stat-value {
            font-weight: 600;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            background-color: rgba(0, 0, 0, 0.2);
            padding: 5px 15px 5px 5px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .user-profile:hover {
            background-color: rgba(0, 0, 0, 0.4);
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            color: white;
        }

        .user-name {
            font-weight: 600;
        }

        .user-level {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        /* Main Content */
        main {
            padding-top: 100px;
            min-height: 100vh;
        }

        .course-header {
            background: linear-gradient(135deg, #4cc9f0, #3a86ff) !important;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .course-header-content {
            max-width: 70%;
        }

        .course-title {
            font-size: 2.5rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .subject-icon {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            background: linear-gradient(135deg, #4cc9f0, #3a86ff) !important;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .course-description {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .course-meta {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
            background-color: rgba(0, 0, 0, 0.2);
            padding: 8px 15px;
            border-radius: 10px;
        }

        .meta-item i {
            color: var(--accent);
        }

        .course-progress-container {
            background-color: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 15px;
            width: 25%;
        }

        .progress-title {
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .progress-bar {
            height: 10px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            border-radius: 5px;
            background: linear-gradient(90deg, #4cc9f0, #3a86ff) !important;
            width: 75%;
        }

        .progress-stats {
            display: flex;
            justify-content: space-between;
        }

        /* Course Content */
        .course-content {
            display: grid;
            grid-template-columns: 7fr 3fr;
            gap: 30px;
        }

        .lessons-section {
            background-color: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i {
            color: var(--accent);
        }

        .lesson-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .lesson-item {
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .lesson-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .lesson-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .lesson-title {
            font-size: 1.2rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .lesson-title i {
            color: #4cc9f0 !important;
        }

        .lesson-status {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            background-color: rgba(79, 70, 229, 0.2);
            color: var(--accent);
        }

        .lesson-content {
            margin-bottom: 15px;
        }

        .lesson-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .lesson-rewards {
            display: flex;
            gap: 15px;
        }

        .xp-reward, .coin-reward {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .xp-reward i {
            color: var(--accent);
        }

        .coin-reward i {
            color: var(--warning);
        }

        .take-course-btn {
            display: inline-block;
            padding: 10px 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .take-course-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(114, 9, 183, 0.4);
        }

        /* Course Sidebar */
        .course-sidebar {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .sidebar-card {
            background-color: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .features-list {
            list-style-type: none;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .feature-item i {
            color: var(--success);
        }

        .cta-button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 20px;
            text-decoration: none;
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(114, 9, 183, 0.4);
        }

        .instructor-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .instructor-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4cc9f0, #3a86ff) !important;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
            margin-bottom: 15px;
        }

        .instructor-name {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .instructor-title {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 15px;
        }

        .instructor-stats {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .instructor-stat {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-number {
            font-weight: 700;
            font-size: 1.1rem;
        }

        .stat-label {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--text);
            padding: 10px 15px;
            border-radius: 8px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }

        .back-button:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        /* Responsive */
        @media (max-width: 992px) {
            .course-content {
                grid-template-columns: 1fr;
            }
            
            .course-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .course-header-content {
                max-width: 100%;
                margin-bottom: 20px;
            }
            
            .course-progress-container {
                width: 100%;
            }
        }

        @media (max-width: 768px) {
            .user-stats {
                display: none;
            }
            
            .course-meta {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-content">
            <a href="../index.html" class="logo">
                <i class="fas fa-gamepad"></i>
                Pilar-eLearn
            </a>
            <div class="user-stats">
                <div class="stat">
                    <i class="fas fa-bolt"></i>
                    <span class="stat-value">1,250 XP</span>
                </div>
                <div class="stat">
                    <i class="fas fa-coins"></i>
                    <span class="stat-value">175</span>
                </div>
                <div class="stat">
                    <i class="fas fa-trophy"></i>
                    <span class="stat-value">12/50</span>
                </div>
            </div>
            <div class="user-profile" id="userProfileDisplay">
                <div class="avatar" id="userAvatarDisplay">JS</div>
                <div>
                    <div class="user-name" id="userNameDisplay">Player</div>
                    <div class="user-level">Level 5 Scholar</div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <div class="container">
            <a href="../index.html" class="back-button">
                <i class="fas fa-arrow-left"></i>
                Back to Dashboard
            </a>

            <!-- Course Header -->
            <div class="course-header">
                <div class="course-header-content">
                    <h1 class="course-title">
                        <div class="subject-icon">
                            <i class="fas fa-book"></i>
                        </div>
                        Literary Analysis: The Hero's Journey
                    </h1>
                    <p class="course-description">
                        Discover the universal pattern of the Hero's Journey as described by Joseph Campbell. Learn how to identify and analyze this powerful narrative structure in literature, films, and other storytelling media.
                    </p>
                    <div class="course-meta">
                        <div class="meta-item">
                            <i class="fas fa-clock"></i>
                            <span>8 Lessons</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-signal"></i>
                            <span>Intermediate</span>
                        </div>
                        <div class="meta-item">
                            <i class="fas fa-users"></i>
                            <span>1,423 Students</span>
                        </div>
                    </div>
                </div>
                <div class="course-progress-container">
                    <div class="progress-title">
                        <i class="fas fa-chart-line"></i>
                        Your Progress
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                    <div class="progress-stats">
                        <div>75% Complete</div>
                        <div>6/8 Lessons</div>
                    </div>
                    <a href="#lesson-content" class="cta-button">
                        <i class="fas fa-play-circle"></i>
                        Continue Learning
                    </a>
                </div>
            </div>

            <!-- Course Content -->
            <div class="course-content">
                <div class="lessons-section">
                    <h2 class="section-title">
                        <i class="fas fa-list-ul"></i>
                        Course Content
                    </h2>
                    <div class="lesson-list" id="lesson-content">
                        <!-- Lesson 1 -->
                        <div class="lesson-item">
                            <div class="lesson-header">
                                <h3 class="lesson-title">
                                    <i class="fas fa-check-circle"></i>
                                    Introduction to the Hero's Journey
                                </h3>
                                <div class="lesson-status">Completed</div>
                            </div>
                            <div class="lesson-content">
                                <p>Learn about Joseph Campbell's monomyth and its significance in world literature. Discover the three main phases of the Hero's Journey: Departure, Initiation, and Return.</p>
                            </div>
                            <div class="lesson-meta">
                                <div class="lesson-rewards">
                                    <div class="xp-reward">
                                        <i class="fas fa-bolt"></i>
                                        <span>20 XP</span>
                                    </div>
                                    <div class="coin-reward">
                                        <i class="fas fa-coins"></i>
                                        <span>5</span>
                                    </div>
                                </div>
                                <a href="#" class="take-course-btn">Review Lesson</a>
                            </div>
                        </div>

                        <!-- Lesson 2 -->
                        <div class="lesson-item">
                            <div class="lesson-header">
                                <h3 class="lesson-title">
                                    <i class="fas fa-check-circle"></i>
                                    The Call to Adventure
                                </h3>
                                <div class="lesson-status">Completed</div>
                            </div>
                            <div class="lesson-content">
                                <p>Explore the initial stage where the hero receives the call to embark on their adventure. Analyze examples from classic and modern literature, identifying the different forms the call might take.</p>
                            </div>
                            <div class="lesson-meta">
                                <div class="lesson-rewards">
                                    <div class="xp-reward">
                                        <i class="fas fa-bolt"></i>
                                        <span>25 XP</span>
                                    </div>
                                    <div class="coin-reward">
                                        <i class="fas fa-coins"></i>
                                        <span>5</span>
                                    </div>
                                </div>
                                <a href="#" class="take-course-btn">Review Lesson</a>
                            </div>
                        </div>

                        <!-- Lesson 3 -->
                        <div class="lesson-item">
                            <div class="lesson-header">
                                <h3 class="lesson-title">
                                    <i class="fas fa-check-circle"></i>
                                    Crossing the Threshold
                                </h3>
                                <div class="lesson-status">Completed</div>
                            </div>
                            <div class="lesson-content">
                                <p>Study the moment when the hero commits to the journey and crosses from the ordinary world into the special world. Learn about threshold guardians and the significance of this pivotal moment.</p>
                            </div>
                            <div class="lesson-meta">
                                <div class="lesson-rewards">
                                    <div class="xp-reward">
                                        <i class="fas fa-bolt"></i>
                                        <span>30 XP</span>
                                    </div>
                                    <div class="coin-reward">
                                        <i class="fas fa-coins"></i>
                                        <span>10</span>
                                    </div>
                                </div>
                                <a href="#" class="take-course-btn">Review Lesson</a>
                            </div>
                        </div>

                        <!-- Current Lesson -->
                        <div class="lesson-item" style="border: 2px solid var(--accent);">
                            <div class="lesson-header">
                                <h3 class="lesson-title">
                                    <i class="fas fa-play-circle"></i>
                                    The Road of Trials
                                </h3>
                                <div class="lesson-status">In Progress</div>
                            </div>
                            <div class="lesson-content">
                                <p>Examine the series of tests, tasks, or ordeals that the hero must undergo to begin the transformation. Understand how these challenges help develop the hero's character and abilities.</p>
                            </div>
                            <div class="lesson-meta">
                                <div class="lesson-rewards">
                                    <div class="xp-reward">
                                        <i class="fas fa-bolt"></i>
                                        <span>35 XP</span>
                                    </div>
                                    <div class="coin-reward">
                                        <i class="fas fa-coins"></i>
                                        <span>10</span>
                                    </div>
                                </div>
                                <a href="#" class="take-course-btn">Continue Lesson</a>
                            </div>
                        </div>

                        <!-- Lesson 5 -->
                        <div class="lesson-item">
                            <div class="lesson-header">
                                <h3 class="lesson-title">
                                    <i class="fas fa-lock"></i>
                                    The Meeting with the Goddess
                                </h3>
                                <div class="lesson-status">Locked</div>
                            </div>
                            <div class="lesson-content">
                                <p>Explore the stage where the hero experiences unconditional love, often represented by a powerful female figure. Analyze the transformative power of this encounter.</p>
                            </div>
                            <div class="lesson-meta">
                                <div class="lesson-rewards">
                                    <div class="xp-reward">
                                        <i class="fas fa-bolt"></i>
                                        <span>40 XP</span>
                                    </div>
                                    <div class="coin-reward">
                                        <i class="fas fa-coins"></i>
                                        <span>15</span>
                                    </div>
                                </div>
                                <a href="#" class="take-course-btn" style="background: linear-gradient(135deg, #6c757d, #495057);">Unlock Lesson</a>
                            </div>
                        </div>

                        <!-- Lesson 6 -->
                        <div class="lesson-item">
                            <div class="lesson-header">
                                <h3 class="lesson-title">
                                    <i class="fas fa-lock"></i>
                                    Final Assessment: Analyze a Hero's Journey
                                </h3>
                                <div class="lesson-status">Locked</div>
                            </div>
                            <div class="lesson-content">
                                <p>Apply what you've learned to analyze the Hero's Journey in a work of your choice. Create a detailed breakdown of the stages and submit your analysis for review.</p>
                            </div>
                            <div class="lesson-meta">
                                <div class="lesson-rewards">
                                    <div class="xp-reward">
                                        <i class="fas fa-bolt"></i>
                                        <span>100 XP</span>
                                    </div>
                                    <div class="coin-reward">
                                        <i class="fas fa-coins"></i>
                                        <span>25</span>
                                    </div>
                                </div>
                                <a href="#" class="take-course-btn" style="background: linear-gradient(135deg, #6c757d, #495057);">Unlock Assessment</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="course-sidebar">
                    <!-- Course Features -->
                    <div class="sidebar-card">
                        <h3 class="section-title">
                            <i class="fas fa-star"></i>
                            Course Features
                        </h3>
                        <ul class="features-list">
                            <li class="feature-item">
                                <i class="fas fa-video"></i>
                                <span>Interactive video lessons</span>
                            </li>
                            <li class="feature-item">
                                <i class="fas fa-file-alt"></i>
                                <span>Downloadable resources</span>
                            </li>
                            <li class="feature-item">
                                <i class="fas fa-comments"></i>
                                <span>Discussion forums</span>
                            </li>
                            <li class="feature-item">
                                <i class="fas fa-tasks"></i>
                                <span>Practical assignments</span>
                            </li>
                            <li class="feature-item">
                                <i class="fas fa-certificate"></i>
                                <span>Completion certificate</span>
                            </li>
                        </ul>
                        <a href="#" class="cta-button">
                            <i class="fas fa-play-circle"></i>
                            Start Today's Lesson
                        </a>
                    </div>

                    <!-- Instructor Info -->
                    <div class="sidebar-card">
                        <h3 class="section-title">
                            <i class="fas fa-chalkboard-teacher"></i>
                            Your Instructor
                        </h3>
                        <div class="instructor-card">
                            <div class="instructor-avatar">
                                <i class="fas fa-user-tie"></i>
                            </div>
                            <h4 class="instructor-name">Prof. Maria Santos</h4>
                            <p class="instructor-title">English Literature Specialist</p>
                            <div class="instructor-stats">
                                <div class="instructor-stat">
                                    <div class="stat-number">15+</div>
                                    <div class="stat-label">Years Experience</div>
                                </div>
                                <div class="instructor-stat">
                                    <div class="stat-number">42</div>
                                    <div class="stat-label">Courses</div>
                                </div>
                                <div class="instructor-stat">
                                    <div class="stat-number">4.9</div>
                                    <div class="stat-label">Rating</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get user data from localStorage if available
            const userName = localStorage.getItem('pilarUserName') || 'Scholar';
            const userAvatar = localStorage.getItem('pilarUserAvatar') || '1';
            
            // Update displays
            document.getElementById('userNameDisplay').textContent = userName;
            
            // Set avatar based on stored value
            let avatarIcon = '';
            switch(userAvatar) {
                case '1':
                    avatarIcon = '<i class="fas fa-user"></i>';
                    break;
                case '2':
                    avatarIcon = '<i class="fas fa-user-graduate"></i>';
                    break;
                case '3':
                    avatarIcon = '<i class="fas fa-user-astronaut"></i>';
                    break;
                case '4':
                    avatarIcon = '<i class="fas fa-user-ninja"></i>';
                    break;
                default:
                    avatarIcon = '<i class="fas fa-user"></i>';
            }
            document.getElementById('userAvatarDisplay').innerHTML = avatarIcon;
            
            // Course lesson interaction
            const lessonItems = document.querySelectorAll('.lesson-item');
            lessonItems.forEach(item => {
                const button = item.querySelector('.take-course-btn');
                if (button && !button.hasAttribute('style')) {
                    button.addEventListener('click', function(e) {
                        e.preventDefault();
                        // Here you would typically navigate to the specific lesson
                        alert('Taking you to the lesson content. This would be implemented with actual lesson pages.');
                    });
                }
            });

            // Add chatbot functionality
            initChatbot();
        });

        // Initialize the chatbot
        function initChatbot() {
            // Create chatbot elements if they don't exist
            if (!document.querySelector('.chatbot-container')) {
                createChatbotElements();
            }

            const chatbotToggle = document.querySelector('.chatbot-toggle');
            const chatbotContainer = document.querySelector('.chatbot-container');
            const chatbotClose = document.querySelector('.chatbot-close');
            const chatbotForm = document.querySelector('.chatbot-form');
            const chatbotInput = document.querySelector('.chatbot-input');
            const chatbotMessages = document.querySelector('.chatbot-messages');
            const chatbotSuggestions = document.querySelector('.chatbot-suggestions');

            // Toggle chatbot visibility
            chatbotToggle.addEventListener('click', () => {
                chatbotContainer.classList.toggle('chatbot-hidden');
                if (!chatbotContainer.classList.contains('chatbot-hidden')) {
                    populateSuggestions(chatbotSuggestions, 'english');
                }
            });

            // Close chatbot
            chatbotClose.addEventListener('click', () => {
                chatbotContainer.classList.add('chatbot-hidden');
            });

            // Handle form submission
            chatbotForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const message = chatbotInput.value.trim();
                if (message) {
                    addChatMessage(chatbotMessages, message, 'user');
                    chatbotInput.value = '';
                    
                    // Process the message and generate a response
                    setTimeout(() => {
                        const response = generateEnglishResponse(message);
                        addChatMessage(chatbotMessages, response, 'bot');
                        
                        // Suggest follow-up questions
                        const followUps = suggestFollowUp(message, 'english');
                        populateSuggestions(chatbotSuggestions, 'english', followUps);
                    }, 500);
                }
            });

            // Initial suggestions
            populateSuggestions(chatbotSuggestions, 'english');
        }

        // Create chatbot elements
        function createChatbotElements() {
            const chatbotHTML = `
                <div class="chatbot-toggle">
                    <i class="fas fa-comment-dots"></i>
                </div>
                <div class="chatbot-container chatbot-hidden">
                    <div class="chatbot-header">
                        <h3><i class="fas fa-robot"></i> Learning Assistant</h3>
                        <button class="chatbot-close"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="chatbot-messages"></div>
                    <div class="chatbot-suggestions"></div>
                    <form class="chatbot-form">
                        <input type="text" class="chatbot-input" placeholder="Ask me about the Hero's Journey...">
                        <button type="submit" class="chatbot-send"><i class="fas fa-paper-plane"></i></button>
                    </form>
                </div>
            `;

            const chatbotStyles = `
                <style>
                    .chatbot-toggle {
                        position: fixed;
                        bottom: 20px;
                        right: 20px;
                        width: 60px;
                        height: 60px;
                        background: linear-gradient(135deg, #4cc9f0, #3a86ff);
                        border-radius: 50%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        cursor: pointer;
                        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
                        z-index: 1000;
                        font-size: 24px;
                        color: white;
                        transition: all 0.3s ease;
                    }
                    
                    .chatbot-toggle:hover {
                        transform: scale(1.1);
                    }
                    
                    .chatbot-container {
                        position: fixed;
                        bottom: 90px;
                        right: 20px;
                        width: 350px;
                        height: 500px;
                        background-color: var(--card-bg);
                        border-radius: 15px;
                        overflow: hidden;
                        display: flex;
                        flex-direction: column;
                        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
                        z-index: 1000;
                        transition: all 0.3s ease;
                    }
                    
                    .chatbot-hidden {
                        transform: translateY(20px);
                        opacity: 0;
                        pointer-events: none;
                    }
                    
                    .chatbot-header {
                        background: linear-gradient(135deg, #4cc9f0, #3a86ff);
                        padding: 15px;
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        color: white;
                    }
                    
                    .chatbot-header h3 {
                        display: flex;
                        align-items: center;
                        gap: 10px;
                        margin: 0;
                        font-size: 16px;
                    }
                    
                    .chatbot-close {
                        background: transparent;
                        border: none;
                        color: white;
                        cursor: pointer;
                        font-size: 18px;
                    }
                    
                    .chatbot-messages {
                        flex: 1;
                        padding: 15px;
                        overflow-y: auto;
                        display: flex;
                        flex-direction: column;
                        gap: 10px;
                    }
                    
                    .message {
                        padding: 10px 15px;
                        border-radius: 18px;
                        max-width: 80%;
                        word-break: break-word;
                    }
                    
                    .user-message {
                        background-color: rgba(76, 201, 240, 0.1);
                        align-self: flex-end;
                        border-bottom-right-radius: 4px;
                    }
                    
                    .bot-message {
                        background-color: rgba(255, 255, 255, 0.05);
                        align-self: flex-start;
                        border-bottom-left-radius: 4px;
                    }
                    
                    .chatbot-suggestions {
                        padding: 10px 15px;
                        display: flex;
                        flex-wrap: wrap;
                        gap: 8px;
                    }
                    
                    .suggestion-btn {
                        background-color: rgba(76, 201, 240, 0.1);
                        border: 1px solid rgba(76, 201, 240, 0.3);
                        border-radius: 15px;
                        padding: 6px 12px;
                        font-size: 13px;
                        cursor: pointer;
                        transition: all 0.2s ease;
                        color: var(--text);
                    }
                    
                    .suggestion-btn:hover {
                        background-color: rgba(76, 201, 240, 0.2);
                    }
                    
                    .chatbot-form {
                        padding: 15px;
                        display: flex;
                        gap: 10px;
                        border-top: 1px solid rgba(255, 255, 255, 0.1);
                    }
                    
                    .chatbot-input {
                        flex: 1;
                        padding: 10px 15px;
                        border-radius: 20px;
                        border: 1px solid rgba(255, 255, 255, 0.1);
                        background-color: rgba(255, 255, 255, 0.05);
                        color: var(--text);
                        font-size: 14px;
                    }
                    
                    .chatbot-input:focus {
                        outline: none;
                        border-color: rgba(76, 201, 240, 0.5);
                    }
                    
                    .chatbot-send {
                        width: 40px;
                        height: 40px;
                        background: linear-gradient(135deg, #4cc9f0, #3a86ff);
                        border: none;
                        border-radius: 50%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        cursor: pointer;
                        color: white;
                    }
                </style>
            `;

            // Append the HTML and styles to the body
            const div = document.createElement('div');
            div.innerHTML = chatbotHTML + chatbotStyles;
            document.body.appendChild(div);
        }

        // Function to generate a response (English specific)
        function generateEnglishResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            if (lowerMessage.includes("hero's journey") || lowerMessage.includes("hero journey")) {
                return "The Hero's Journey is a narrative structure identified by Joseph Campbell. It describes the typical adventure of the archetype known as The Hero, who goes on an adventure, faces a crisis, wins a victory, and then comes home changed. This pattern appears in ancient myths as well as modern stories.";
            } else if (lowerMessage.includes("archetype") || lowerMessage.includes("character type")) {
                return "Archetypes are recurring patterns or character types in literature. Common archetypes include the hero, mentor, threshold guardian, herald, shapeshifter, shadow, ally, and trickster. Each serves a specific function in the Hero's Journey narrative.";
            } else if (lowerMessage.includes("literary analysis") || lowerMessage.includes("analyze literature")) {
                return "Literary analysis involves examining elements like plot, character, setting, point of view, symbolism, and theme. For the Hero's Journey in particular, we look at how the protagonist transforms through challenges and how this reflects universal human experiences.";
            } else if (lowerMessage.includes("symbolism")) {
                return "Symbolism in literature is when objects, characters, figures, or colors represent abstract ideas or concepts. In the Hero's Journey, common symbols include thresholds (representing major life transitions), supernatural aid (wisdom), and the return (transformation).";
            } else {
                return "I'm your English literature assistant. I can help with questions about the Hero's Journey, literary analysis, character archetypes, and more. What would you like to learn about?";
            }
        }

        // Function to suggest follow-up questions
        function suggestFollowUp(message, context) {
            const lowerMessage = message.toLowerCase();
            
            if (context === 'english') {
                if (lowerMessage.includes("hero") || lowerMessage.includes("journey")) {
                    return [
                        "What are the 12 stages of the Hero's Journey?",
                        "How does the Hero's Journey apply to modern films?",
                        "Who is Joseph Campbell?"
                    ];
                } else if (lowerMessage.includes("symbol") || lowerMessage.includes("theme")) {
                    return [
                        "What are common symbols in literature?",
                        "How do I identify the theme of a story?",
                        "What's the difference between motif and symbol?"
                    ];
                } else if (lowerMessage.includes("character") || lowerMessage.includes("archetype")) {
                    return [
                        "What is the mentor archetype?",
                        "How do flat and round characters differ?",
                        "What is character development?"
                    ];
                } else {
                    // Default English suggestions
                    return [
                        "Explain the Hero's Journey",
                        "What are literary archetypes?",
                        "How do I analyze literature?"
                    ];
                }
            }
        }

        // Function to populate the suggestion buttons
        function populateSuggestions(suggestionsContainer, context, customList = null) {
            suggestionsContainer.innerHTML = ''; // Clear existing suggestions
            
            // Use custom suggestions if provided, otherwise use defaults for English
            const suggestions = customList || [
                "Explain the Hero's Journey",
                "What are literary archetypes?",
                "How do I analyze symbolism?",
                "Tell me about character development"
            ];
            
            suggestions.forEach(text => {
                const suggestionBtn = document.createElement('button');
                suggestionBtn.classList.add('suggestion-btn');
                suggestionBtn.textContent = text;
                
                suggestionBtn.addEventListener('click', () => {
                    const chatbotMessages = document.querySelector('.chatbot-messages');
                    const chatbotSuggestions = document.querySelector('.chatbot-suggestions');
                    
                    // Add the user message
                    addChatMessage(chatbotMessages, text, 'user');
                    
                    // Generate and add the bot response
                    setTimeout(() => {
                        const response = generateEnglishResponse(text);
                        addChatMessage(chatbotMessages, response, 'bot');
                        
                        // Suggest follow-ups
                        const followUps = suggestFollowUp(text, 'english');
                        populateSuggestions(chatbotSuggestions, 'english', followUps);
                    }, 500);
                });
                
                suggestionsContainer.appendChild(suggestionBtn);
            });
        }

        // Function to add a message to the chat
        function addChatMessage(messagesContainer, text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message', sender === 'bot' ? 'bot-message' : 'user-message');
            messageDiv.textContent = text;
            messagesContainer.appendChild(messageDiv);
            // Scroll to the bottom
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
    </script>
</body>
</html>